"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9858],{9858:(x,g,u)=>{u.r(g),u.d(g,{BenefactorDetailsPage:()=>E});var m=u(5861),c=u(6814),p=u(95),i=u(3614),h=u(6790),t=u(2029),Z=u(7626),A=u(1434),f=u(9912);function D(n,l){1&n&&(t.TgZ(0,"ion-badge",14),t._uU(1,"\u062c\u062f\u064a\u062f"),t.qZA())}function T(n,l){1&n&&(t.TgZ(0,"ion-badge",15),t._uU(1,"\u0645\u0646\u0634\u0648\u0631"),t.qZA())}function b(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.updateStatus(null==a.data?null:a.data.id,null==a.data?null:a.data.status))}),t._uU(1,"\u0646\u0634\u0631 "),t.qZA()}}function P(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.updateStatus(null==a.data?null:a.data.id,null==a.data?null:a.data.status))}),t._uU(1," \u0645\u0633\u0648\u062f\u0629 "),t.qZA()}}function I(n,l){if(1&n&&(t.TgZ(0,"ion-item")(1,"ion-label",7),t._uU(2,"\u062a\u063a\u064a\u0631 \u0627\u0644\u062d\u0627\u0644\u0629:"),t.qZA(),t.YNc(3,b,2,0,"ion-button",16),t.YNc(4,P,2,0,"ion-button",17),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",1===e.data.status),t.xp6(1),t.Q6J("ngIf",2===e.data.status)}}function U(n,l){if(1&n&&(t.TgZ(0,"ion-card",6)(1,"ion-item")(2,"ion-avatar",7),t._UZ(3,"img",8),t.qZA(),t.TgZ(4,"ion-label")(5,"ion-card-title"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"date"),t.qZA()()(),t.TgZ(10,"ion-card-content")(11,"p")(12,"b",9),t._uU(13,"\u0627\u0644\u0645\u062a\u0628\u0631\u0639"),t.qZA(),t._uU(14),t.qZA(),t.TgZ(15,"p")(16,"b",9),t._uU(17,"\u0627\u0644\u0645\u0628\u0644\u063a"),t.qZA(),t._uU(18),t.qZA(),t.TgZ(19,"ion-item"),t.YNc(20,D,2,0,"ion-badge",10),t.YNc(21,T,2,0,"ion-badge",11),t.TgZ(22,"ion-label"),t._uU(23,"\u0627\u0644\u062d\u0627\u0644\u0629:"),t.qZA()(),t.YNc(24,I,5,2,"ion-item",5),t.qZA(),t.TgZ(25,"ion-card")(26,"ion-card-content",12)(27,"ion-item-divider")(28,"ion-label"),t._uU(29,"\u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a"),t.qZA()(),t._UZ(30,"app-slide-modal",13),t.qZA()()()),2&n){const e=t.oxw();t.xp6(6),t.hij("\u0644\u0635\u0627\u0644\u062d: ",null==e.data||null==e.data.request_status?null:e.data.request_status.name,""),t.xp6(2),t.Oqu(t.xi3(9,8,null==e.data?null:e.data.created_at,"short")),t.xp6(6),t.hij(" ",null==e.data?null:e.data.name," "),t.xp6(4),t.hij(" ",null==e.data?null:e.data.amount," "),t.xp6(2),t.Q6J("ngIf",1===(null==e.data?null:e.data.status)),t.xp6(1),t.Q6J("ngIf",2===(null==e.data?null:e.data.status)),t.xp6(3),t.Q6J("ngIf",e.isAdmin),t.xp6(6),t.Q6J("images",e.imageList)}}function v(n,l){1&n&&(t.TgZ(0,"div")(1,"ion-list")(2,"ion-item",20)(3,"ion-label")(4,"h3"),t._UZ(5,"ion-skeleton-text",21),t.qZA(),t.TgZ(6,"p"),t._UZ(7,"ion-skeleton-text",22),t.qZA(),t.TgZ(8,"p"),t._UZ(9,"ion-skeleton-text",23),t.qZA()(),t.TgZ(10,"ion-avatar",7),t._UZ(11,"ion-skeleton-text",24),t.qZA()()()())}let E=(()=>{var n;class l{constructor(o,a,s,_){this.sup=o,this.helper=a,this.router=s,this.route=_,this.showModal=!1}ngOnInit(){this.route.paramMap.subscribe(()=>{var o;let a=null===(o=this.router.getCurrentNavigation())||void 0===o?void 0:o.extras;if(a.id){this.data=a;const _=JSON.parse(this.data.images).filter(r=>/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.test(r));this.imageList=_.map(r=>`https://iogenwxvdivtmnlnyrgs.supabase.co/storage/v1/object/public/bok/${r}`)}else this.requestId=this.route.snapshot.paramMap.get("id"),this.getDetails(this.requestId)}),this.isAdmin=this.route.snapshot.paramMap.get("role")}getDetails(o){var a=this;return(0,m.Z)(function*(){yield a.sup.getDataById("benefactor",o,"*, request_status(*)").then(s=>{if(200===s.status){a.data=s.data;const r=JSON.parse(a.data.images).filter(d=>/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.test(d));a.imageList=r.map(d=>`https://iogenwxvdivtmnlnyrgs.supabase.co/storage/v1/object/public/bok/${d}`)}else a.helper.presentAlert("error")})})()}updateStatus(o,a){var s=this;return(0,m.Z)(function*(){yield s.helper.startLoad();let _=0;_=1===a?2:1,s.data.status=1===s.data.status?2:1,s.sup.updateData("benefactor",o,{status:_}).then(d=>{s.helper.dismissLoader(),console.log(d)}).catch(d=>{s.helper.dismissLoader(),s.helper.presentToast(`error: ${d}`)})})()}}return(n=l).\u0275fac=function(o){return new(o||n)(t.Y36(Z.T),t.Y36(A.W),t.Y36(f.F0),t.Y36(f.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-benefactor-details"]],standalone:!0,features:[t.jDz],decls:9,vars:5,consts:[[3,"translucent"],["slot","end"],["color","light","defaultHref","/benefactor"],[3,"fullscreen"],["color","light","class","animate__animated animate__backInLeft animate__delay-.2s",4,"ngIf"],[4,"ngIf"],["color","light",1,"animate__animated","animate__backInLeft","animate__delay-.2s"],["slot","start"],["alt","lost icon","src","/assets/images/person.jpg"],[1,"phone"],["color","secondary","slot","end",4,"ngIf"],["color","warning","slot","end",4,"ngIf"],[1,"animate__animated","animate__backInLeft","animate__delay-.1s"],[3,"images"],["color","secondary","slot","end"],["color","warning","slot","end"],["color","warning","slot","end",3,"click",4,"ngIf"],["color","secondary","slot","end",3,"click",4,"ngIf"],["color","warning","slot","end",3,"click"],["color","secondary","slot","end",3,"click"],[1,"item"],["animated","true",2,"width","50%"],["animated","true",2,"width","80%"],["animated","true",2,"width","60%"],["animated","true"]],template:function(o,a){1&o&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.qZA(),t.TgZ(4,"ion-buttons",1),t._UZ(5,"ion-back-button",2),t.qZA()()(),t.TgZ(6,"ion-content",3),t.YNc(7,U,31,11,"ion-card",4),t.YNc(8,v,12,0,"div",5),t.qZA()),2&o&&(t.Q6J("translucent",!0),t.xp6(3),t.hij("\u062a\u0628\u0631\u0639 #",null==a.data?null:a.data.id,""),t.xp6(3),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("ngIf",null==a.data?null:a.data.name),t.xp6(1),t.Q6J("ngIf",!a.data||0===a.data||0===(null==a.data||null==a.data.name?null:a.data.name.length)))},dependencies:[i.Pc,i.BJ,i.oU,i.yp,i.YG,i.Sm,i.PM,i.FN,i.Dq,i.W2,i.Gu,i.Ie,i.rH,i.Q$,i.q_,i.CK,i.wd,i.sr,i.cs,c.ez,c.O5,c.uU,p.u5,h.n]}),l})()}}]);