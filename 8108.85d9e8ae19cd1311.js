"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8108],{8108:(q,f,a)=>{a.r(f),a.d(f,{SignupPage:()=>F});var g=a(5861),c=a(6814),o=a(95),i=a(1509),u=a(6689),Z=a(7626),T=a(1434),P=a(6958);function v(e,t){1&e&&(u.TgZ(0,"span",14),u._uU(1," \u062d\u0642\u0644 \u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628 "),u.qZA())}function S(e,t){1&e&&(u.TgZ(0,"span",14),u._uU(1," \u0627\u0642\u0644 \u0639\u062f\u062f \u0644\u0640 \u0627\u062d\u0631\u0641 \u0627\u0644\u0627\u0633\u0645 \u0647\u064a 5 "),u.qZA())}function C(e,t){1&e&&(u.TgZ(0,"span",14),u._uU(1," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0645\u0637\u0644\u0648\u0628 "),u.qZA())}function I(e,t){1&e&&(u.TgZ(0,"span",14),u._uU(1," \u062a\u0627\u0643\u062f \u0645\u0646 \u062a\u0646\u0633\u064a\u0642 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 "),u.qZA())}function h(e,t){1&e&&(u.TgZ(0,"span",14),u._uU(1," \u0627\u0642\u0644 \u0639\u062f\u062f \u0644\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0647\u0648 9 "),u.qZA())}function b(e,t){1&e&&(u.TgZ(0,"span",14),u._uU(1," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0645\u0637\u0644\u0648\u0628 "),u.qZA())}function U(e,t){1&e&&(u.TgZ(0,"span",14),u._uU(1," \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0627\u0644\u0645\u062f\u062e\u0644 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d "),u.qZA())}function E(e,t){1&e&&(u.TgZ(0,"span",14),u._uU(1," \u062d\u0642\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u0645\u0637\u0644\u0648\u0628 "),u.qZA())}function D(e,t){1&e&&(u.TgZ(0,"span",14),u._uU(1," \u0627\u0642\u0644 \u0639\u062f\u062f \u0644\u0644\u0627\u062d\u0631\u0641 6 "),u.qZA())}let F=(()=>{var e;class t{constructor(n,r,l,s){this.supabase=n,this.formBuilder=r,this.helper=l,this.router=s,this.isSubmitted=!1}ngOnInit(){var n=this;return(0,g.Z)(function*(){n.signUpForm=n.formBuilder.group({name:["",[o.kI.required,o.kI.minLength(2)]],email:["",[o.kI.required,o.kI.email]],phone:["",[o.kI.required,o.kI.pattern("^[0-9]+$"),o.kI.minLength(8),o.kI.maxLength(15)]],password:["",[o.kI.required,o.kI.minLength(5),o.kI.maxLength(60)]]})})()}get errorControl(){return this.signUpForm.controls}submitForm(){var n=this;return(0,g.Z)(function*(){return n.isSubmitted=!0,n.signUpForm.valid?void(yield n.sendToServer(n.signUpForm.value)):(yield n.helper.presentToast("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0643\u0645\u0627\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644!"),!1)})()}sendToServer(n){var r=this;return(0,g.Z)(function*(){yield r.helper.startLoad(),r.supabase.signUp(n.email,n.password).then(l=>{var s,p,_;if(null!=l.data.user||null!=l.data.user)return localStorage.setItem("session",JSON.stringify({access_token:null===(s=l.data)||void 0===s||null===(s=s.session)||void 0===s?void 0:s.access_token,expires_at:null===(p=l.data)||void 0===p||null===(p=p.session)||void 0===p?void 0:p.expires_at,refresh_token:null==l||null===(_=l.data.session)||void 0===_?void 0:_.refresh_token})),r.supabase.saveData("profiles",{name:n.name,phone:n.phone,user_id:l.data.user.id}).then(m=>{var d;console.log("userInfo: ",m),m.data&&localStorage.setItem("user",JSON.stringify({auth_id:m.data.user_id,profile_id:m.data.id,email:null===(d=l.data.user)||void 0===d?void 0:d.email,phone:n.phone,name:n.name}))}),r.helper.dismissLoader(),void r.router.navigate(["/"]);r.helper.dismissLoader(),r.helper.presentAlert("\u0627\u0644\u0628\u064a\u0646\u0627\u062a \u0627\u0644\u0645\u062f\u062e\u0644\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629")}).catch(l=>{r.helper.dismissLoader(),console.error("err: ",l)})})()}}return(e=t).\u0275fac=function(n){return new(n||e)(u.Y36(Z.T),u.Y36(o.qu),u.Y36(T.W),u.Y36(P.F0))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-signup"]],standalone:!0,features:[u.jDz],decls:31,vars:12,consts:[[3,"translucent"],["color","primary"],[1,"ion-text-center"],["slot","end"],["color","light","defaultHref","/tabs/setting"],[3,"fullscreen"],["novalidate","",3,"formGroup","ngSubmit"],["label","\u0627\u0633\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644","labelPlacement","floating","formControlName","name","placeholder","\u0627\u062f\u062e\u0644 \u0627\u0633\u0645\u0643"],["class","error ion-padding",4,"ngIf"],["lines","full"],["label","\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641","labelPlacement","floating","name","number","formControlName","phone","placeholder","\u0627\u062f\u062e\u0644 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"],["label","\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a","labelPlacement","floating","name","email","formControlName","email","placeholder","\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0627\u0644\u0643\u062a\u0631\u0648\u0646\u064a"],["label","\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631","labelPlacement","floating","formControlName","password","type","password","placeholder","\u0643\u0644\u0645\u0629 \u0627\u0644\u0633\u0631 \u0644\u062a\u0627\u0645\u064a\u0646 \u062d\u0633\u0627\u0628\u0643"],["type","submit","color","primary","expand","block"],[1,"error","ion-padding"]],template:function(n,r){1&n&&(u.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),u._uU(3,"\u062a\u0633\u062c\u064a\u0644 \u062c\u062f\u064a\u062f"),u.qZA(),u.TgZ(4,"ion-buttons",3),u._UZ(5,"ion-back-button",4),u.qZA()()(),u.TgZ(6,"ion-content",5)(7,"form",6),u.NdJ("ngSubmit",function(){return r.submitForm()}),u.TgZ(8,"ion-card")(9,"ion-list")(10,"ion-item"),u._UZ(11,"ion-input",7),u.qZA(),u.YNc(12,v,2,0,"span",8),u.YNc(13,S,2,0,"span",8),u.TgZ(14,"ion-item",9),u._UZ(15,"ion-input",10),u.qZA(),u.YNc(16,C,2,0,"span",8),u.YNc(17,I,2,0,"span",8),u.YNc(18,h,2,0,"span",8),u.TgZ(19,"ion-item",9),u._UZ(20,"ion-input",11),u.qZA(),u.YNc(21,b,2,0,"span",8),u.YNc(22,U,2,0,"span",8),u.TgZ(23,"ion-item",9),u._UZ(24,"ion-input",12),u.qZA(),u.YNc(25,E,2,0,"span",8),u.YNc(26,D,2,0,"span",8),u.qZA(),u.TgZ(27,"ion-row")(28,"ion-col")(29,"ion-button",13),u._uU(30,"\u0627\u0644\u062a\u0627\u0644\u064a"),u.qZA()()()()()()),2&n&&(u.Q6J("translucent",!0),u.xp6(6),u.Q6J("fullscreen",!0),u.xp6(1),u.Q6J("formGroup",r.signUpForm),u.xp6(5),u.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.name.errors?null:r.errorControl.name.errors.required)),u.xp6(1),u.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.name.errors?null:r.errorControl.name.errors.minlength)),u.xp6(3),u.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.phone.errors?null:r.errorControl.phone.errors.required)),u.xp6(1),u.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.phone.errors?null:r.errorControl.phone.errors.pattern)),u.xp6(1),u.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.phone.errors?null:r.errorControl.phone.errors.minlength)),u.xp6(3),u.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.email.errors?null:r.errorControl.email.errors.required)),u.xp6(1),u.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.email.errors?null:r.errorControl.email.errors.pattern)),u.xp6(3),u.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.password.errors?null:r.errorControl.password.errors.required)),u.xp6(1),u.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.password.errors?null:r.errorControl.password.errors.minlength)))},dependencies:[i.Pc,i.oU,i.YG,i.Sm,i.PM,i.wI,i.W2,i.Gu,i.pK,i.Ie,i.q_,i.Nd,i.wd,i.sr,i.j9,i.cs,c.ez,c.O5,o.u5,o._Y,o.JJ,o.JL,o.UX,o.sg,o.u]}),t})()}}]);