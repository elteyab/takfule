"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9661],{9661:(q,d,r)=>{r.r(d),r.d(d,{RequestsPage:()=>A});var l=r(5861),i=r(1509),c=r(6814),e=r(6689),g=r(6958),h=r(1434),f=r(7626);function p(s,_){if(1&s){const o=e.EpF();e.TgZ(0,"ion-button",10),e.NdJ("click",function(){e.CHM(o);const n=e.oxw().$implicit,a=e.oxw();return e.KtG(a.openDetails(n))}),e._uU(1," \u062a\u0641\u0627\u0635\u064a\u0644"),e.qZA()}}function m(s,_){if(1&s){const o=e.EpF();e.TgZ(0,"ion-button",10),e.NdJ("click",function(){e.CHM(o);const n=e.oxw().$implicit,a=e.oxw();return e.KtG(a.openDetailsAdmin(n))}),e._uU(1," \u062a\u0641\u0627\u0635\u064a\u0644"),e.qZA()}}function Z(s,_){if(1&s&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-label"),e._uU(3),e.qZA(),e.TgZ(4,"ion-label"),e._uU(5),e.ALo(6,"date"),e.qZA()(),e.TgZ(7,"ion-card-content")(8,"p"),e._uU(9),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA()(),e.YNc(12,p,2,0,"ion-button",9),e.YNc(13,m,2,0,"ion-button",9),e.qZA()),2&s){const o=_.$implicit,t=e.oxw();e.xp6(3),e.hij("\u062d\u0627\u0644\u0629#: ",o.id,""),e.xp6(2),e.hij("\u0627\u0644\u062a\u0627\u0631\u064a\u062e: ",e.xi3(6,6,o.created_at,"short"),""),e.xp6(4),e.hij("\u0627\u0644\u0627\u0633\u0645: ",o.name,""),e.xp6(2),e.hij("\u0648\u0635\u0641 \u0627\u0644\u062d\u0627\u0644\u0629: ",o.description,""),e.xp6(1),e.Q6J("ngIf","user"===t.userInfo.role),e.xp6(1),e.Q6J("ngIf","admin"===t.userInfo.role)}}function T(s,_){1&s&&(e.TgZ(0,"div")(1,"ion-list")(2,"ion-item",11)(3,"ion-label")(4,"h3"),e._UZ(5,"ion-skeleton-text",12),e.qZA(),e.TgZ(6,"p"),e._UZ(7,"ion-skeleton-text",13),e.qZA(),e.TgZ(8,"p"),e._UZ(9,"ion-skeleton-text",14),e.qZA()(),e.TgZ(10,"ion-avatar",15),e._UZ(11,"ion-skeleton-text",16),e.qZA()()()())}let A=(()=>{var s;class _{constructor(t,n,a,u){this.router=t,this.helper=n,this.supabase=a,this.nav=u,this.page=0,this.userInfo=JSON.parse(localStorage.getItem("user")),console.log("sss: ",this.userInfo)}ngOnInit(){this.supabase.getData("request_status","*,benefactor(*)").then(t=>{console.log(t.data),this.request=t.data})}openDetails(t){var n=this;return(0,l.Z)(function*(){yield n.nav.navigateForward(`/request-details/${t.id}/user`,t)})()}openDetailsAdmin(t){var n=this;return(0,l.Z)(function*(){yield n.nav.navigateForward(`/request-details/${t.id}/admin`,t)})()}onIonInfinite(t){var n=this;return(0,l.Z)(function*(){yield n.helper.startLoad(),n.page=n.page+1,setTimeout(()=>{n.helper.dismissLoader(),t.target.complete()},1e3)})()}doRefresh(t){setTimeout(()=>{this.page=1,this.ngOnInit(),t.target.complete()},2e3)}searchName(t){var n=this;return(0,l.Z)(function*(){let a=yield t.detail.value;a.length>0?n.supabase.search("request_status",a,"*,benefactor(*)","name_mobile_id").then(u=>{console.log("re:ss: ",u),n.request=u.data}).catch(u=>{console.log("err: ",u)}):n.ngOnInit()})()}}return(s=_).\u0275fac=function(t){return new(t||s)(e.Y36(g.F0),e.Y36(h.W),e.Y36(f.T),e.Y36(i.SH))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-requests"]],standalone:!0,features:[e.jDz],decls:13,vars:4,consts:[[3,"translucent"],["placeholder","\u0627\u0628\u062d\u062b \u0628\u0640(\u0631\u0642\u0645 \u0627\u0644\u062d\u0627\u0644\u0629, \u0627\u0644\u0647\u0627\u062a\u0641 , \u0627\u0644\u0627\u0633\u0645)",3,"ionChange"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","pullingText","Pull to refresh","refreshingSpinner","circles","refreshingText","Refreshing..."],[1,"animate__animated","animate__backInRight","animate__delay-.4s"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ionInfinite"],["expand","block",3,"click",4,"ngIf"],["expand","block",3,"click"],[1,"item"],["animated","true",2,"width","50%"],["animated","true",2,"width","80%"],["animated","true",2,"width","60%"],["slot","start"],["animated","true"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"\u0627\u0644\u062d\u0627\u0644\u0627\u062a"),e.qZA()(),e.TgZ(4,"ion-searchbar",1),e.NdJ("ionChange",function(u){return n.searchName(u)}),e.qZA()(),e.TgZ(5,"ion-content",2)(6,"ion-refresher",3),e.NdJ("ionRefresh",function(u){return n.doRefresh(u)}),e._UZ(7,"ion-refresher-content",4),e.qZA(),e.TgZ(8,"ion-list",5),e.YNc(9,Z,14,9,"ion-card",6),e.qZA(),e.YNc(10,T,12,0,"div",7),e.TgZ(11,"ion-infinite-scroll",8),e.NdJ("ionInfinite",function(u){return n.onIonInfinite(u)}),e._UZ(12,"ion-infinite-scroll-content"),e.qZA()()),2&t&&(e.Q6J("translucent",!0),e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(4),e.Q6J("ngForOf",n.request),e.xp6(1),e.Q6J("ngIf",!n.request))},dependencies:[i.Pc,i.BJ,i.YG,i.PM,i.FN,i.Zi,i.W2,i.Gu,i.ju,i.MB,i.Ie,i.Q$,i.q_,i.nJ,i.Wo,i.VI,i.CK,i.wd,i.sr,i.j9,c.ez,c.sg,c.O5,c.uU]}),_})()}}]);