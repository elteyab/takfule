"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8746],{8746:(b,c,r)=>{r.r(c),r.d(c,{AddBenefactorPage:()=>P});var d=r(5861),p=r(6814),a=r(95),s=r(3614),e=r(2029),f=r(9912),g=r(1434),h=r(7626);function A(o,_){1&o&&(e.TgZ(0,"p"),e._uU(1,"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a \u0646\u062a\u064a\u062c\u0629"),e.qZA())}function v(o,_){if(1&o&&(e.TgZ(0,"ion-item"),e.YNc(1,A,2,0,"p",6),e._UZ(2,"ion-input",9),e.qZA()),2&o){const l=e.oxw();e.xp6(1),e.Q6J("ngIf",!1===l.statusResult),e.xp6(1),e.s9C("value",l.statusResult.name)}}let P=(()=>{var o;class _{constructor(u,t,n,i,m){this.formBuilder=u,this.router=t,this.route=n,this.helper=i,this.supabase=m,this.statusResult=!1,this.createForm()}ngOnInit(){var u=this;return(0,d.Z)(function*(){yield u.route.paramMap.subscribe(()=>{var t;u.request=null===(t=u.router.getCurrentNavigation())||void 0===t?void 0:t.extras,null!=u.request.id&&u.donation(u.request)})})()}createForm(){this.requestForm=this.formBuilder.group({name:new a.NI(null,[a.kI.required,a.kI.min(12)]),status_number:new a.NI(null,[a.kI.min(6),a.kI.required]),amount:new a.NI(null,[a.kI.min(5),a.kI.required]),status_name:new a.NI(null,[a.kI.min(5),a.kI.required])})}saveForm(){var u=this;return(0,d.Z)(function*(){yield u.helper.startLoad();const t=u.requestForm.value;t.status=1,yield u.supabase.saveData("benefactor",t).then(n=>{if(201===n.status)return u.helper.dismissLoader(),u.helper.presentToast("\u0634\u0643\u0631\u0627 \u0644\u0643 - \u062a\u0645 \u0627\u0644\u0627\u0631\u0633\u0627\u0644"),u.requestForm.reset(),void u.router.navigate([`/add-images/${n.data.id}/benefactor`]);u.helper.dismissLoader(),u.helper.presentAlert("\u062e\u0637\u0627 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645")}).catch(n=>{u.helper.dismissLoader(),u.helper.presentAlert(`\u062e\u0637\u0627 \u0641\u064a:  ${n}`),console.error("ee: ",n)})})()}searchById(){var u=this;return(0,d.Z)(function*(){var t;yield u.helper.startLoad();const n=null===(t=u.requestForm.get("status_number"))||void 0===t?void 0:t.value;u.supabase.getDataById("request_status",n).then(i=>{var m;u.helper.dismissLoader(),200===i.status?(u.statusResult=i.data,null===(m=u.requestForm.get("status_name"))||void 0===m||m.setValue(u.statusResult.name)):u.statusResult=!1}).catch(i=>{u.helper.dismissLoader(),u.helper.presentToast(`error: ${i}`)})})()}donation(u){var t,n;null===(t=this.requestForm.get("status_name"))||void 0===t||t.setValue(u.name),null===(n=this.requestForm.get("status_number"))||void 0===n||n.setValue(u.id),this.statusResult=!0}}return(o=_).\u0275fac=function(u){return new(u||o)(e.Y36(a.qu),e.Y36(f.F0),e.Y36(f.gz),e.Y36(g.W),e.Y36(h.T))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-benefactor"]],standalone:!0,features:[e.jDz],decls:18,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],[3,"formGroup","ngSubmit"],["label","\u0627\u0633\u0645\u0643","labelPlacement","floating","formControlName","name","name","name","placeholder","\u0631\u062c\u0627\u0621 \u0643\u062a\u0627\u0628\u0629 \u0627\u0644\u0627\u0633\u0645"],["label","\u0627\u0644\u0645\u0628\u0644\u063a","labelPlacement","floating","formControlName","amount","name","amount","placeholder","\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0628\u0631\u0639"],["label","\u0631\u0642\u0645 \u0627\u0644\u062d\u0627\u0644\u0629","labelPlacement","floating","formControlName","status_number","name","status_number","placeholder","\u0631\u0642\u0645 \u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u062a\u0628\u0631\u0639 \u0644\u0647",3,"ionChange"],[4,"ngIf"],["expand","block","type","submit",3,"disabled"],["name","checkmark"],["label","\u0627\u0633\u0645 \u0635\u0627\u062d\u0628 \u0627\u0644\u062d\u0627\u0644\u0629","labelPlacement","floating","formControlName","status_name","name","status_name","placeholder","\u0627\u0643\u062a\u0628 \u0627\u0633\u0645 \u0627\u0644\u0634\u062e\u0635 \u0627\u0644\u0645\u062a\u0628\u0631\u0639 \u0644\u0647",3,"value"]],template:function(u,t){1&u&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"\u0627\u0644\u062a\u0628\u0631\u0639"),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"form",2),e.NdJ("ngSubmit",function(){return t.saveForm()}),e.TgZ(6,"ion-list")(7,"ion-item-group")(8,"ion-item"),e._UZ(9,"ion-input",3),e.qZA(),e.TgZ(10,"ion-item"),e._UZ(11,"ion-input",4),e.qZA(),e.TgZ(12,"ion-item")(13,"ion-input",5),e.NdJ("ionChange",function(){return t.searchById()}),e.qZA()(),e.YNc(14,v,3,2,"ion-item",6),e.TgZ(15,"ion-button",7),e._UZ(16,"ion-icon",8),e._uU(17," \u062d\u0641\u0638 "),e.qZA()()()()()),2&u&&(e.Q6J("translucent",!0),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("formGroup",t.requestForm),e.xp6(9),e.Q6J("ngIf",t.statusResult),e.xp6(1),e.Q6J("disabled",!t.requestForm.valid))},dependencies:[s.Pc,s.YG,s.W2,s.Gu,s.gu,s.pK,s.Ie,s.Ub,s.q_,s.wd,s.sr,s.j9,p.ez,p.O5,a.u5,a._Y,a.JJ,a.JL,a.UX,a.sg,a.u]}),_})()}}]);